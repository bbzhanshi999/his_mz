(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e19ad"],{"7ac0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"300px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"departForm",attrs:{model:e.targetDepart,rules:e.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"部门名称","label-width":e.labelWidth,prop:"departName"}},[a("el-input",{model:{value:e.targetDepart.departName,callback:function(t){e.$set(e.targetDepart,"departName",t)},expression:"targetDepart.departName"}})],1),a("el-form-item",{attrs:{label:"部门种类","label-width":e.labelWidth,prop:"departType"}},[a("el-select",{staticStyle:{"text-align":"left"},model:{value:e.targetDepart.departType,callback:function(t){e.$set(e.targetDepart,"departType",t)},expression:"targetDepart.departType"}},e._l(e.departTypes,function(e){return a("el-option",{attrs:{label:e.val,value:e.keyword}})}),1)],1),a("el-form-item",{attrs:{label:"部门级别","label-width":e.labelWidth,prop:"departLevel"}},[a("el-select",{model:{value:e.targetDepart.departLevel,callback:function(t){e.$set(e.targetDepart,"departLevel",t)},expression:"targetDepart.departLevel"}},e._l(e.departLevels,function(e){return a("el-option",{attrs:{label:e.val,value:e.keyword}})}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("提交")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini"},model:{value:e.departName,callback:function(t){e.departName=t},expression:"departName"}},[a("template",{slot:"prepend"},[e._v("\n                    部门名称\n                ")])],2)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择部门类型"},model:{value:e.departType,callback:function(t){e.departType=t},expression:"departType"}},e._l(e.departTypes,function(e){return a("el-option",{attrs:{label:e.val,value:e.keyword}})}),1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini"},on:{click:e.getPage}},[e._v("查询")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleInsert}},[e._v("新增部门")])],1)],1),a("el-row",[a("el-table",{attrs:{data:e.departList}},[a("el-table-column",{attrs:{prop:"departName",label:"部门名称"}}),a("el-table-column",{attrs:{prop:"departLevel",label:"部门级别",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"departType",label:"部门种类"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-row",[a("el-pagination",{attrs:{layout:"prev,pager,next,total",total:e.pageInfo.total,"page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.pageNum},on:{"current-change":e.getPage,"update:currentPage":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"pageNum",t)}}})],1)],1)},l=[],i={name:"Department",created:function(){this.getPage()},data:function(){return{labelWidth:"80px",dialogTitle:"新建部门",dialogVisible:!1,departName:"",departType:"",pageInfo:{total:0,pageSize:5,pageNum:1},targetDepart:{id:"",departName:"",departType:"",departLevel:""},rules:{departName:[{required:!0,message:"不能为空",trigger:"blur"},{max:10,message:"部门名称不能超过10个字符",trigger:"blur"}],departType:[{required:!0,message:"不能为空",trigger:"blur"}],departLevel:[{required:!0,message:"不能为空",trigger:"blur"}]},departList:[],departTypes:[{keyword:"medical",val:"医疗"},{keyword:"admin",val:"行政"}],departLevels:[{keyword:"1",val:"一级"},{keyword:"2",val:"二级"},{keyword:"3",val:"三级"}]}},methods:{tableFormatter:function(e,t,a,r){},handleSave:function(){var e=this;this.$refs["departForm"].validate(function(t){if(!t)return!1;e.axios.post("/api/global/department/save",e.targetDepart).then(function(t){e.$notify({title:"提示",message:"部门保存成功！",type:"success"}),e.getPage()}).catch(function(t){e.$notify({title:"提示",message:"部门保存失败！",type:"error"})}),e.dialogVisible=!1})},handleEdit:function(e){this.dialogTitle="编辑部门",this.dialogVisible=!0,this.targetDepart.id=e.id,this.targetDepart.departName=e.departName,this.targetDepart.departType=e.departType,this.targetDepart.departLevel=e.departLevel},handleDelete:function(e){var t=this;this.$confirm("是否确认删除该条记录？","警告",{type:"error"}).then(function(){t.axios.delete("/api/global/department/delete/"+e.id).then(function(e){t.$notify({title:"提示",message:"删除成功",type:"success"}),t.getPage()}).catch(function(e){t.$notify({title:"提示",message:"删除失败",type:"error"})})})},handleInsert:function(){this.targetDepart.departName="",this.targetDepart.departType="",this.targetDepart.departLevel="",this.targetDepart.id="",this.dialogTitle="新增部门",this.dialogVisible=!0},getPage:function(){var e=this;this.axios.post("/api/global/department/page",null,{params:{departName:this.departName,departType:this.departType,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}}).then(function(t){e.departList=t.data.list,e.pageInfo.pageNum=t.data.pageNum,e.pageInfo.pageSize=t.data.pageSize,e.pageInfo.total=t.data.total})}}},p=i,n=a("2877"),o=Object(n["a"])(p,r,l,!1,null,"4c513a7a",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0e19ad.bf2cbdd6.js.map